# Рахунки (Accounts)

Обліковий запис являє собою ресурс на блокчейні Aptos, який може надсилати транзакції. Кожен обліковий запис ідентифікується за допомогою конкретної 32-байтової адреси облікового запису і є контейнером для модулів Move та ресурсів Move.

## Вступ

Стан кожного облікового запису містить як код, так і дані:
+ **Code**: модулі Move містять код (оголошення типу та процедури), але вони не містять даних. Процедури модуля кодують правила оновлення глобального стану блокчейну.
+ **Data**. Переміщення ресурсів містить дані, але не містить коду. Кожне значення ресурсу має тип, який оголошується в модулі, опублікованому в розподіленій базі даних блокчейну.

Обліковий запис може містити довільну кількість ресурсів Move і модулів Move.

## Початкове налаштування облікового запису

На обліковий запис Aptos посилається адреса облікового запису, яка має 32-байтове значення. 
Адреса облікового запису є похідною від початкового загальнодоступного ключа(ів) підтвердження для цього облікового запису. 
Зокрема, адреса облікового запису є останніми 32 байтами криптографічного хешу SHA-3 256 початкового публічного ключа(ів) перевірки, 
об’єднаного з байтом ідентифікатора схеми підпису. 
Блокчейн Aptos підтримує дві схеми підпису: [Ed25519](https://aptos.dev/reference/glossary#ed25519) і MultiEd25519 (для транзакцій з кількома підписами). 
Закритий ключ облікового запису необхідний для підписання транзакцій.

Кожен обліковий запис також зберігає ***sequence_number***, який представляє наступний порядковий номер транзакції, це необхідно для запобігання атак повторного відтворення транзакцій. 
Під час створення облікового запису це ініціалізується на 0.

## Ключі аутентифікації

Кожен обліковий запис зберігає ключ аутентифікації. 
Цей ключ автентифікації дозволяє власникам облікових записів змінювати свої приватні ключі, пов’язані з обліковим записом, не змінюючи адресу, на якій розміщується їхній обліковий запис. 
Під час ротації ключ аутентифікації оновлюється на основі нещодавно згенерованої пари відкритих ключів.

### Single signer authentication

Щоб створити ключ аутентифікації та адресу облікового запису:
+ **Створити пару ключів**: створити нову пару ключів (pubkey_A, privkey_A). Блокчейн Aptos використовує схему PureEdDSA над кривою Ed25519, як визначено в RFC 8032.
+ **Отримати 64-байтовий ключ аутентифікації**: отримати 64-байтовий ключ аутентифікації auth_key = sha3-256(pubkey_A | 0x00), де | позначає конкатенацію. 0x00 — це 1-байтовий ідентифікатор схеми підпису, де 0x00 означає одноразовий підпис. Перші 32 байт auth_key є "префіксом ключа аутентифікації". Останні 32 байт auth_key є адресою облікового запису. Будь-яка транзакція, яка створює обліковий запис, потребує як адреси облікового запису, так і префікса ключа аутентифікації, але транзакції, яка взаємодіє з наявним обліковим записом, потрібна лише адреса.

### Multisigner authentication

Ключ аутентифікації для облікового запису може вимагати або одного підпису, або кількох підписів ("multisig"). При автентифікації з кількома підписами K-of-N для облікового запису загалом є N підписувачів, і для автентифікації транзакції необхідно використовувати принаймні K з цих N підписів.

Створення ключа автентифікації з кількома підписами K-of-N схоже на створення ключа з одним підписом:
1. **Створення пар ключів**: Створення N ed25519 відкритих ключів p_1, ..., p_n.
2. **Отримання 64-байтового ключа аутентифікації**: обчисліть auth_key = sha3-256(p_1 | … | p_n | K | 0x01). Отримайте адресу та префікс ключа авторизації, як описано вище. K являє собою K-of-N, необхідний для аутентифікації транзакції. 0x01 — це 1-байтовий ідентифікатор схеми підпису, де 0x01 означає мультипідпис.

## Ресурси облікового запису

Кожен обліковий запис на Aptos може зберігати дані, які він обробляє у ресурсах. Початковим ресурсом є самі дані облікового запису (ключ аутентифікації та порядковий номер). Після створення облікового запису можна додати додаткові ресурси, такі як валюта або NFT. Щоб створити облікові записи, тестова мережа Aptos вимагає відкритий ключ облікового запису та деяку кількість TestCoin для додавання до цього облікового запису, що призводить до створення нового облікового запису з цими двома ресурсами.